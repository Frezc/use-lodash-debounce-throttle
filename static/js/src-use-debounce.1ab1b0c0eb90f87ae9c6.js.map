{"version":3,"sources":["webpack:///./src/createCancelableHook.ts","webpack:///./src/use-debounce.ts","webpack:///./src/use-debounce.mdx"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","createCancelableHook","createFn","depFn","fn","wait","options","compareParams","debouncedFn","useRef","fnRef","current","useMemo","cancel","useEffect","apply","arguments","useDebounce","debounce","push","leading","maxWait","trailing","MDXContent","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","layout","_this$props","components","objectWithoutProperties","react_default","a","createElement","dist","name","id","parentName","className","index_m","__position","__code","__scope","useState","_useState","_useState2","slicedToArray","setWait","debouncedChange","value","console","log","type","onChange","e","target","onClick","React","Component"],"mappings":"sHAAA,IAAAA,EAAAC,EAAA,iCA6CeC,IArCf,SAA+CC,EAAyEC,GACtH,OAAO,SAACC,EAAOC,EAAeC,GAC5B,IAAMC,EAAgBJ,EAAME,EAAMC,GAE5BE,EAAcC,kBAA+B,GAC7CC,EAAQD,iBAAOL,GA4BrB,OA3BAM,EAAMC,QAAUP,EAQhBQ,kBAAQ,WACFJ,EAAYG,UAEdH,EAAYG,QAAQE,SACpBL,EAAYG,QAAUT,EAASE,KAEhCG,GACHO,oBAAU,WACR,OAAO,WACDN,EAAYG,SACdH,EAAYG,QAAQE,WAGvB,IACEL,EAAYG,UAEfH,EAAYG,QArBLT,EAAS,WACd,OAAOQ,EAAMC,SAAWD,EAAMC,QAANI,MAAAL,EAAKM,YAC5BX,EAAMC,IAsBJE,EAAYG,s6BCXRM,EAVKhB,YAAqB,kBAAeiB,IAAQH,WAAR,EAAAC,YAAqB,SAACX,EAAeC,GAC3F,IAAMC,EAAuB,CAACF,GAM9B,OALIC,IACFC,EAAcY,KAAKb,EAAQc,SAC3Bb,EAAcY,KAAKb,EAAQe,SAC3Bd,EAAcY,KAAKb,EAAQgB,WAEtBf,8CCjBYgB,cACnB,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,OAAS,KAFGP,wEAIV,IAAAQ,EAC0BL,KAAKJ,MAA9BU,EADDD,EACCC,WAAeV,EADhBE,OAAAS,EAAA,EAAAT,CAAAO,EAAA,gBAGP,OAAOG,EAAAC,EAAAC,cAACC,EAAA,OAAD,CACEC,KAAK,UAELN,WAAYA,GACzBE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,KAAKN,WAAYA,EAAYV,MAAO,CAACiB,GAAK,iBAAvD,gBACAL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,MAAMN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,OAAON,WAAYA,EAAYQ,WAAW,MAAMlB,MAAO,CAACmB,UAAY,gBAAjF,oEAE3CP,EAAAC,EAAAC,cAACM,EAAA,EAAD,CAAYC,WAAY,EAAGC,OAAQ,wbAA2bC,QAAS,CAACvB,MAAOI,KAAOA,KAAKJ,MAAQA,EAAMwB,oBAASlC,sBAAUG,gBACzhB,WAAM,IAAAgC,EACmBD,mBAAS,KAD5BE,EAAAxB,OAAAyB,EAAA,EAAAzB,CAAAuB,EAAA,GACE5C,EADF6C,EAAA,GACQE,EADRF,EAAA,GAECG,EAAkBpC,EAAY,SAACqC,GACnCC,QAAQC,IAAI,kBAAmBF,IAC9BjD,EAAM,CAAEgB,QAAS,MACxB,OACEe,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,SACEmB,KAAK,OACLC,SAAU,SAACC,GACTN,EAAgBM,EAAEC,OAAON,UAG7BlB,EAAAC,EAAAC,cAAA,UAAQuB,QAAS,kBAAMT,EAAQ/C,EAAO,OAAtC,uBA7BoCyD,IAAMC","file":"static/js/src-use-debounce.de9e0270.js","sourcesContent":["import { useEffect, useRef, useMemo } from 'react';\r\n\r\nexport type Fn = (...args: any[]) => any;\r\nexport interface Cancelable {\r\n  cancel(): void;\r\n  flush(): void;\r\n}\r\n\r\nfunction createCancelableHook<T extends Fn, O>(createFn: (fnWrapper: Fn, wait?: number, options?: O) => T & Cancelable, depFn: (wait?: number, options?: O) => any[]) {\r\n  return (fn: T, wait?: number, options?: O) => {\r\n    const compareParams = depFn(wait, options);\r\n\r\n    const debouncedFn = useRef<T & Cancelable | false>(false);\r\n    const fnRef = useRef(fn);\r\n    fnRef.current = fn;\r\n\r\n    function createDebounce() {\r\n      return createFn((...params) => {\r\n        return fnRef.current && fnRef.current(...params)\r\n      }, wait, options);\r\n    }\r\n\r\n    useMemo(() => {\r\n      if (debouncedFn.current) {\r\n        // only call when update\r\n        debouncedFn.current.cancel();\r\n        debouncedFn.current = createFn(fn);\r\n      }\r\n    }, compareParams);\r\n    useEffect(() => {\r\n      return () => {\r\n        if (debouncedFn.current) {\r\n          debouncedFn.current.cancel();\r\n        }\r\n      }\r\n    }, []);\r\n    if (!debouncedFn.current) {\r\n      // first time\r\n      debouncedFn.current = createDebounce();\r\n    }\r\n\r\n    return debouncedFn.current;\r\n  }\r\n}\r\n\r\nexport default createCancelableHook;\r\n","import { debounce } from 'lodash-es';\r\nimport createCancelableHook from './createCancelableHook';\r\n\r\ninterface DebounceSettings {\r\n  /**\r\n   * Specify invoking on the leading edge of the timeout.\r\n   */\r\n  leading?: boolean;\r\n\r\n  /**\r\n   * The maximum time func is allowed to be delayed before itâ€™s invoked.\r\n   */\r\n  maxWait?: number;\r\n\r\n  /**\r\n   * Specify invoking on the trailing edge of the timeout.\r\n   */\r\n  trailing?: boolean;\r\n}\r\n\r\nconst useDebounce = createCancelableHook((...params) => debounce(...params), (wait?: number, options?: DebounceSettings) => {\r\n  const compareParams: any[] = [wait];\r\n  if (options) {\r\n    compareParams.push(options.leading);\r\n    compareParams.push(options.maxWait);\r\n    compareParams.push(options.trailing);\r\n  }\r\n  return compareParams;\r\n})\r\n\r\nexport default useDebounce;\r\n","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground } from 'docz';\nimport { useState, useEffect } from 'react';\nimport useDebounce from './use-debounce.ts';\n\nconst layoutProps = {\n  \n};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}>\n<MDXTag name=\"h1\" components={components} props={{\"id\":\"use-debounce\"}}>{`use-debounce`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`const debouncedFn = useDebounce(func, [wait=0], [options={}])\n`}</MDXTag></MDXTag>\n<Playground __position={0} __code={'() => {\\n  const [wait, setWait] = useState(500)\\n  const debouncedChange = useDebounce(\\n    value => {\\n      console.log(\\'debounced value\\', value)\\n    },\\n    wait,\\n    { maxWait: 2000 },\\n  )\\n  return (\\n    <div>\\n      <input\\n        type=\\\"text\\\"\\n        onChange={e => {\\n          debouncedChange(e.target.value)\\n        }}\\n      />\\n      <button onClick={() => setWait(wait + 500)}>add wait</button>\\n    </div>\\n  )\\n}'} __scope={{props: this ? this.props : props,useState,useEffect,useDebounce}}>\n  {() => {\n    const [wait, setWait] = useState(500);\n    const debouncedChange = useDebounce((value) => {\n      console.log('debounced value', value);\n    }, wait, { maxWait: 2000 });\nreturn (\n  <div>\n    <input\n      type=\"text\"\n      onChange={(e) => {\n        debouncedChange(e.target.value);\n      }}\n    />\n    <button onClick={() => setWait(wait + 500)}>add wait</button>\n  </div>\n)\n  }}\n</Playground>\n           </MDXTag>\n  }\n}\n  "],"sourceRoot":""}