{"version":3,"sources":["webpack:///./src/use-stable-memo.ts","webpack:///./src/createCancelableHook.ts","webpack:///./src/use-throttle.ts","webpack:///./src/use-throttle.mdx"],"names":["useStableMemo","nextCreate","deps","valueRef","useRef","undefined","depsRef","current","nextDeps","prevDeps","i","length","Object","is","areHookInputsEqual","createCancelableHook","createFn","depFn","fn","wait","options","compareParams","concat","debouncedFn","fnRef","cancel","apply","arguments","useEffect","useDebounce","throttle","push","leading","trailing","MDXContent","props","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","layout","React","Component","_this$props","components","_objectWithoutProperties","react_default","a","createElement","dist","name","id","parentName","className","index_m","__position","__code","__scope","useState","useThrottle","debouncedChange","v","console","log","currentTarget","type","onChange","e","target","value"],"mappings":"+JAEe,SAASA,EAAuBC,EAAqBC,GAClE,IAAMC,EAAWC,sBAAsBC,GACjCC,EAAUF,sBAA0BC,GAE1C,OAAIC,EAAQC,SAAWL,GASzB,SACEM,EACAC,GAEA,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAASE,QAAUD,EAAIF,EAASG,OAAQD,IAC1D,IAAIE,OAAOC,GAAGL,EAASE,GAAID,EAASC,IAGpC,OAAO,EAET,OAAO,EAnBwBI,CAAmBZ,EAAMI,EAAQC,SACvDJ,EAASI,SAGlBJ,EAASI,QAAUN,IACnBK,EAAQC,QAAUL,EACXC,EAASI,SC8BHQ,IAjCf,SAA+CC,EAAyEC,GACtH,OAAO,SAACC,EAAOC,EAAeC,EAAalB,GACzC,IAAMmB,EAAgBJ,EAAME,EAAMC,GAASE,OAAOpB,GAAQ,IAEpDqB,EAAcnB,sBAAuBC,GACrCmB,EAAQpB,iBAAOc,GAwBrB,OAvBAM,EAAMjB,QAAUW,EAQhBlB,EAAc,WACRuB,EAAYhB,SAEdgB,EAAYhB,QAAQkB,SAEtBF,EAAYhB,QAVLS,EAAS,WACd,OAAOQ,EAAMjB,SAAWiB,EAAMjB,QAANmB,MAAAF,EAAKG,YAC5BR,EAAMC,IASRC,GACHO,oBAAU,WACR,OAAO,WACDL,EAAYhB,SACdgB,EAAYhB,QAAQkB,WAGvB,IAEIF,EAAYhB,sSCdRsB,EATKd,YAAqB,kBAAee,IAAQJ,WAAR,EAAAC,YAAqB,SAACR,EAAeC,GAC3F,IAAMC,EAAuB,CAACF,GAK9B,OAJIC,IACFC,EAAcU,KAAKX,EAAQY,SAC3BX,EAAcU,KAAKX,EAAQa,WAEtBZ,6sCCXYa,cACnB,SAAAA,EAAYC,GAAO,IAAAC,EAAA,mGAAAC,CAAAC,KAAAJ,IACjBE,EAAAG,EAAAD,KAAAE,EAAAN,GAAAO,KAAAH,KAAMH,KACDO,OAAS,KAFGN,yPADmBO,IAAMC,kDAKnC,IAAAC,EAC0BP,KAAKH,MAA9BW,EADDD,EACCC,WAAeX,EADhBY,EAAAF,EAAA,gBAGP,OAAOG,EAAAC,EAAAC,cAACC,EAAA,OAAD,CACEC,KAAK,UAELN,WAAYA,GACzBE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,KAAKN,WAAYA,EAAYX,MAAO,CAACkB,GAAK,iBAAvD,gBACAL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,MAAMN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,OAAON,WAAYA,EAAYQ,WAAW,MAAMnB,MAAO,CAACoB,UAAY,gBAAjF,qEAE3CP,EAAAC,EAAAC,cAACM,EAAA,EAAD,CAAYC,WAAY,EAAGC,OAAQ,4aAAibC,QAAS,CAACxB,MAAOG,KAAOA,KAAKH,MAAQA,EAAMyB,oBAAShC,sBAAUiC,gBAC/gB,WACC,IAAMC,EAAkBD,EAAY,SAACE,GACnCC,QAAQC,IAAI,kBAAmBF,IAC9B,IAAK,CAAE/B,SAAS,IACbd,EAAK2C,EAAY,SAAUK,GAC/BF,QAAQC,IAAI,gBAAiBC,IAC5B,KACP,OACElB,EAAAC,EAAAC,cAAA,SACEiB,KAAK,OACLC,SAAU,SAACC,GACTP,EAAgBO,EAAEC,OAAOC,OACzBrD,EAAGmD,EAAEH","file":"static/js/src-use-throttle.f2cd75b7.js","sourcesContent":["import { useRef } from \"react\";\n\nexport default function useStableMemo<T = any>(nextCreate: () => T, deps?: any[]) {\n  const valueRef = useRef<T | undefined>(undefined);\n  const depsRef = useRef<any[] | undefined>(undefined);\n\n  if (depsRef.current && deps && areHookInputsEqual(deps, depsRef.current)) {\n    return valueRef.current;\n  }\n\n  valueRef.current = nextCreate();\n  depsRef.current = deps;\n  return valueRef.current;\n}\n\nfunction areHookInputsEqual(\n  nextDeps: any[],\n  prevDeps: any[],\n) {\n  for (let i = 0; i < prevDeps.length && i < nextDeps.length; i++) {\n    if (Object.is(nextDeps[i], prevDeps[i])) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}","import { useEffect, useRef } from 'react';\nimport useStableMemo from './use-stable-memo';\n\nexport type Fn = (...args: any[]) => any;\nexport interface Cancelable {\n  cancel(): void;\n  flush(): void;\n}\n\nfunction createCancelableHook<T extends Fn, O>(createFn: (fnWrapper: Fn, wait?: number, options?: O) => T & Cancelable, depFn: (wait?: number, options?: O) => any[]) {\n  return (fn: T, wait?: number, options?: O, deps?: ReadonlyArray<any>) => {\n    const compareParams = depFn(wait, options).concat(deps || []);\n\n    const debouncedFn = useRef<T & Cancelable>(undefined!);\n    const fnRef = useRef(fn);\n    fnRef.current = fn;\n\n    function createDebounce() {\n      return createFn((...params) => {\n        return fnRef.current && fnRef.current(...params)\n      }, wait, options);\n    }\n\n    useStableMemo(() => {\n      if (debouncedFn.current) {\n        // only call when update\n        debouncedFn.current.cancel();\n      }\n      debouncedFn.current = createDebounce();\n    }, compareParams);\n    useEffect(() => {\n      return () => {\n        if (debouncedFn.current) {\n          debouncedFn.current.cancel();\n        }\n      }\n    }, []);\n\n    return debouncedFn.current;\n  }\n}\n\nexport default createCancelableHook;\n","import { throttle } from 'lodash-es';\nimport createCancelableHook from './createCancelableHook';\n\ninterface ThrottleSettings {\n  /**\n   * If you'd like to disable the leading-edge call, pass this as false.\n   */\n  leading?: boolean;\n\n  /**\n   * If you'd like to disable the execution on the trailing-edge, pass false.\n   */\n  trailing?: boolean;\n}\n\nconst useDebounce = createCancelableHook((...params) => throttle(...params), (wait?: number, options?: ThrottleSettings) => {\n  const compareParams: any[] = [wait];\n  if (options) {\n    compareParams.push(options.leading);\n    compareParams.push(options.trailing);\n  }\n  return compareParams;\n})\n\nexport default useDebounce;\n","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground } from 'docz';\nimport { useState, useEffect } from 'react';\nimport useThrottle from './use-throttle.ts';\n\nconst layoutProps = {\n  \n};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}>\n<MDXTag name=\"h1\" components={components} props={{\"id\":\"use-throttle\"}}>{`use-throttle`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`const throttledFn = useThrottle(func, [wait=0], [options={}]);\n`}</MDXTag></MDXTag>\n<Playground __position={0} __code={'() => {\\n  const debouncedChange = useThrottle(\\n    v => {\\n      console.log(\\'throttled value\\', v)\\n    },\\n    500,\\n    { leading: false },\\n  )\\n  const fn = useThrottle(function(currentTarget) {\\n    console.log(\\'currentTarget\\', currentTarget)\\n  }, 500)\\n  return (\\n    <input\\n      type=\\\"text\\\"\\n      onChange={e => {\\n        debouncedChange(e.target.value)\\n        fn(e.currentTarget)\\n      }}\\n    />\\n  )\\n}'} __scope={{props: this ? this.props : props,useState,useEffect,useThrottle}}>\n  {() => {\n    const debouncedChange = useThrottle((v) => {\n      console.log('throttled value', v);\n    }, 500, { leading: false });\n    const fn = useThrottle(function (currentTarget) {\n      console.log('currentTarget', currentTarget);\n    }, 500);\nreturn (\n  <input\n    type=\"text\"\n    onChange={(e) => {\n      debouncedChange(e.target.value)\n      fn(e.currentTarget);\n    }}\n  />\n)\n  }}\n</Playground>\n           </MDXTag>\n  }\n}\n  "],"sourceRoot":""}