{"version":3,"sources":["/home/frezc/projects/use-lodash-debounce-throttle/src/use-stable-memo.ts","/home/frezc/projects/use-lodash-debounce-throttle/src/createCancelableHook.ts","/home/frezc/projects/use-lodash-debounce-throttle/src/use-debounce.ts","/home/frezc/projects/use-lodash-debounce-throttle/src/use-debounce.mdx"],"names":["useStableMemo","nextCreate","deps","valueRef","useRef","undefined","depsRef","current","nextDeps","prevDeps","i","length","Object","is","areHookInputsEqual","createCancelableHook","createFn","depFn","fn","wait","options","compareParams","concat","debouncedFn","fnRef","cancel","apply","arguments","useEffect","useDebounce","debounce","push","leading","maxWait","trailing","layoutProps","MDXLayout","MDXContent","_ref","components","props","objectWithoutProperties","index_es","assign","mdxType","id","parentName","className","index_esm","__position","__code","__scope","this","Playground","useState","_useState","_useState2","slicedToArray","setWait","debouncedChange","value","console","log","type","onChange","e","target","onClick","isMDXComponent"],"mappings":"+JAEe,SAASA,EAAuBC,EAAqBC,GAClE,IAAMC,EAAWC,sBAAsBC,GACjCC,EAAUF,sBAA0BC,GAE1C,OAAIC,EAAQC,SAAWL,GASzB,SACEM,EACAC,GAEA,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAASE,QAAUD,EAAIF,EAASG,OAAQD,IAC1D,IAAIE,OAAOC,GAAGL,EAASE,GAAID,EAASC,IAGpC,OAAO,EAET,OAAO,EAnBwBI,CAAmBZ,EAAMI,EAAQC,SACvDJ,EAASI,SAGlBJ,EAASI,QAAUN,IACnBK,EAAQC,QAAUL,EACXC,EAASI,SCHlB,SAASQ,EAAsCC,EAAyEC,GACtH,OAAO,SAACC,EAAOC,EAAeC,EAAalB,GACzC,IAAMmB,EAAgBJ,EAAME,EAAMC,GAASE,OAAOpB,GAAQ,IAEpDqB,EAAcnB,sBAAuBC,GACrCmB,EAAQpB,iBAAOc,GAwBrB,OAvBAM,EAAMjB,QAAUW,EAQhBlB,EAAc,WACRuB,EAAYhB,SAEdgB,EAAYhB,QAAQkB,SAEtBF,EAAYhB,QAVLS,EAAS,WACd,OAAOQ,EAAMjB,SAAWiB,EAAMjB,QAANmB,MAAAF,EAAKG,YAC5BR,EAAMC,IASRC,GACHO,oBAAU,WACR,OAAO,WACDL,EAAYhB,SACdgB,EAAYhB,QAAQkB,WAGvB,IAEIF,EAAYhB,8nBAIRQ,irBCtBTc,EAAcd,YAAqB,kBAAee,IAAQJ,WAAR,EAAAC,YAAqB,SAACR,EAAeC,GAC3F,IAAMC,EAAuB,CAACF,GAM9B,OALIC,IACFC,EAAcU,KAAKX,EAAQY,SAC3BX,EAAcU,KAAKX,EAAQa,SAC3BZ,EAAcU,KAAKX,EAAQc,WAEtBb,IAGMQ,4OCtBf,IAKMM,EAAc,GAGdC,EAAY,UACH,SAASC,EAATC,GAGZ,IAFDC,EAECD,EAFDC,WACGC,EACF5B,OAAA6B,EAAA,EAAA7B,CAAA0B,EAAA,gBACD,OAAO1B,OAAA8B,EAAA,EAAA9B,CAACwB,EAADxB,OAAA+B,OAAA,GAAeR,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYK,QAAQ,cAE5EhC,OAAA8B,EAAA,EAAA9B,CAAA,KAAQ,CACNiC,GAAM,gBADR,gBAGAjC,OAAA8B,EAAA,EAAA9B,CAAA,WAAKA,OAAA8B,EAAA,EAAA9B,CAAA,OAAAA,OAAA+B,OAAA,CAAMG,WAAW,OAAU,CAC5BC,UAAa,gBADZ,oEAILnC,OAAA8B,EAAA,EAAA9B,CAACoC,EAAA,EAAD,CAAYC,WAAY,EAAGC,OAAQ,keAAqeC,QAAS,CAC/gBX,MAAOY,KAAOA,KAAKZ,MAAQA,EAC3Ba,eACAC,oBACA1B,sBACAC,eACCe,QAAQ,cACZ,WAAM,IAAAW,EACuBD,mBAAS,KADhCE,EAAA5C,OAAA6C,EAAA,EAAA7C,CAAA2C,EAAA,GACMpC,EADNqC,EAAA,GACYE,EADZF,EAAA,GAEKG,EAAkB9B,EAAY,SAAA+B,GAClCC,QAAQC,IAAI,kBAAmBF,IAC9BzC,EAAM,CACPc,QAAS,MAEX,OAAOrB,OAAA8B,EAAA,EAAA9B,CAAA,WACXA,OAAA8B,EAAA,EAAA9B,CAAA,SAAOmD,KAAK,OAAOC,SAAU,SAAAC,GACrBN,EAAgBM,EAAEC,OAAON,UAEjChD,OAAA8B,EAAA,EAAA9B,CAAA,UAAQuD,QAAS,kBAAMT,EAAQvC,EAAO,OAAtC,YACAP,OAAA8B,EAAA,EAAA9B,CAAA,oBAAYO,EAAZ,4LAQJkB,EAAW+B,gBAAiB","file":"static/js/src-use-debounce.f57a9bce.js","sourcesContent":["import { useRef } from \"react\";\n\nexport default function useStableMemo<T = any>(nextCreate: () => T, deps?: any[]) {\n  const valueRef = useRef<T | undefined>(undefined);\n  const depsRef = useRef<any[] | undefined>(undefined);\n\n  if (depsRef.current && deps && areHookInputsEqual(deps, depsRef.current)) {\n    return valueRef.current;\n  }\n\n  valueRef.current = nextCreate();\n  depsRef.current = deps;\n  return valueRef.current;\n}\n\nfunction areHookInputsEqual(\n  nextDeps: any[],\n  prevDeps: any[],\n) {\n  for (let i = 0; i < prevDeps.length && i < nextDeps.length; i++) {\n    if (Object.is(nextDeps[i], prevDeps[i])) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}","import { useEffect, useRef } from 'react';\nimport useStableMemo from './use-stable-memo';\n\nexport type Fn = (...args: any[]) => any;\nexport interface Cancelable {\n  cancel(): void;\n  flush(): void;\n}\n\nfunction createCancelableHook<T extends Fn, O>(createFn: (fnWrapper: Fn, wait?: number, options?: O) => T & Cancelable, depFn: (wait?: number, options?: O) => any[]) {\n  return (fn: T, wait?: number, options?: O, deps?: ReadonlyArray<any>) => {\n    const compareParams = depFn(wait, options).concat(deps || []);\n\n    const debouncedFn = useRef<T & Cancelable>(undefined!);\n    const fnRef = useRef(fn);\n    fnRef.current = fn;\n\n    function createDebounce() {\n      return createFn((...params) => {\n        return fnRef.current && fnRef.current(...params)\n      }, wait, options);\n    }\n\n    useStableMemo(() => {\n      if (debouncedFn.current) {\n        // only call when update\n        debouncedFn.current.cancel();\n      }\n      debouncedFn.current = createDebounce();\n    }, compareParams);\n    useEffect(() => {\n      return () => {\n        if (debouncedFn.current) {\n          debouncedFn.current.cancel();\n        }\n      }\n    }, []);\n\n    return debouncedFn.current;\n  }\n}\n\nexport default createCancelableHook;\n","import { debounce } from 'lodash-es';\nimport createCancelableHook from './createCancelableHook';\n\ninterface DebounceSettings {\n  /**\n   * Specify invoking on the leading edge of the timeout.\n   */\n  leading?: boolean;\n\n  /**\n   * The maximum time func is allowed to be delayed before itâ€™s invoked.\n   */\n  maxWait?: number;\n\n  /**\n   * Specify invoking on the trailing edge of the timeout.\n   */\n  trailing?: boolean;\n}\n\nconst useDebounce = createCancelableHook((...params) => debounce(...params), (wait?: number, options?: DebounceSettings) => {\n  const compareParams: any[] = [wait];\n  if (options) {\n    compareParams.push(options.leading);\n    compareParams.push(options.maxWait);\n    compareParams.push(options.trailing);\n  }\n  return compareParams;\n})\n\nexport default useDebounce;\n","/* @jsx mdx */\n  import React from 'react'\n  import { mdx } from '@mdx-js/react'\n  /* @jsx mdx */\nimport { Playground } from 'docz';\nimport { useState, useEffect } from 'react';\nimport useDebounce from './use-debounce.ts';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"use-debounce\"\n    }}>{`use-debounce`}</h1>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const debouncedFn = useDebounce(func, [wait=0], [options={}])\n`}</code></pre>\n    <Playground __position={0} __code={'() => {\\n  const [wait, setWait] = useState(500)\\n  const debouncedChange = useDebounce(\\n    value => {\\n      console.log(\\'debounced value\\', value)\\n    },\\n    wait,\\n    { maxWait: 2000 },\\n  )\\n  return (\\n    <div>\\n      <input\\n        type=\\\"text\\\"\\n        onChange={e => {\\n          debouncedChange(e.target.value)\\n        }}\\n      />\\n      <button onClick={() => setWait(wait + 2000)}>add wait</button>\\n      <div>wait: {wait}ms, max 2s</div>\\n    </div>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      Playground,\n      useState,\n      useEffect,\n      useDebounce\n    }} mdxType=\"Playground\">\n  {() => {\n        const [wait, setWait] = useState(500);\n        const debouncedChange = useDebounce(value => {\n          console.log('debounced value', value);\n        }, wait, {\n          maxWait: 2000\n        });\n        return <div>\n    <input type=\"text\" onChange={e => {\n            debouncedChange(e.target.value);\n          }} />\n    <button onClick={() => setWait(wait + 2000)}>add wait</button>\n    <div>wait: {wait}ms, max 2s</div>\n  </div>;\n      }}\n    </Playground>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;\n  "],"sourceRoot":""}